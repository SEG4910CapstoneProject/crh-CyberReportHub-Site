<div class="favourites-page-container">
  <div class="header">
    <h1>Your Favourites</h1>
  </div>

  <!-- Loading Spinner -->
  <crh-progress-spinner *ngIf="isLoading"></crh-progress-spinner>

  <!-- Logged-in view -->
  <div *ngIf="!isLoading && isLoggedIn()" class="sections">
    <!-- Favourite Articles Section -->
    <div class="category-section">
      <h2>Favourite Articles</h2>

      <ng-container *ngIf="favouriteArticles.length; else noFavourites">
        <ul class="article-list">
          <li *ngFor="let article of favouriteArticles" class="article-item">
            <a
              [href]="article.link"
              target="_blank"
              class="article-link"
              (click)="incrementViewCount(article.articleId)">
              <h3>{{ article.title }}</h3>
            </a>
            <p class="article-description">
              {{ article.description || 'No description available.' }}
            </p>
            <p><strong>Published:</strong> {{ article.publishDate || 'N/A' }}</p>

            <span
              class="star-icon"
              (click)="toggleFavourite(article)"
              [class.fav]="true">
              &#9733;
            </span>
          </li>
        </ul>
      </ng-container>

      <ng-template #noFavourites>
        <p class="empty-section">You have no favourite articles yet.</p>
      </ng-template>
    </div>

    <!-- Submitted (Manually Added) Articles Section -->
    <div class="category-section">
      <h2>Manually Added Articles</h2>
      <ng-container *ngIf="submittedArticles?.length; else noSubmitted">
        <ul class="article-list">
          <li *ngFor="let article of submittedArticles" class="article-item">
            <a
              [href]="article.link"
              target="_blank"
              class="article-link"
              (click)="incrementViewCount(article.articleId)">
              <h3>{{ article.title }}</h3>
            </a>
            <p class="article-description">
              {{ article.description || 'No description available.' }}
            </p>
            <p><strong>Published:</strong> {{ article.publishDate || 'N/A' }}</p>
          </li>
        </ul>
      </ng-container>

      <ng-template #noSubmitted>
        <p class="empty-section">No articles have been manually submitted yet.</p>
      </ng-template>
    </div>
  </div>

  <!-- Logged-out view -->
  <div *ngIf="!isLoggedIn() && !isLoading">
    <p>Please log in to view your favourite and submitted articles.</p>
  </div>
</div>
